(()=>{var e={};e.id=6854,e.ids=[6854],e.modules={1896:(e,t,r)=>{"use strict";r.d(t,{A:()=>N});var s=r(60687),i=r(43210),o=r(109),n=r(61742),l=r(66904),a=r(17632),d=r(66076),c=r(75132),u=r(70837),p=r(33658),h=r(6236),x=r(21461),m=r(64505),f=r(12040),v=r(18842),A=r(5848),j=r(86637),g=r(79900),y=r(24132),b=r(90160),C=r(86966),I=r(70998),k=r(97528),S=r(67920),w=r(80798),T=r(78590),M=r(58706),R=r(30847);let P=(0,o.Ay)(n.e)({display:"grid",alignItems:"center"}),D=(0,o.Ay)(l.I)(({theme:e,ownerState:t})=>({gridArea:"1 / 1",width:"min-content",height:"min-content",zIndex:1,opacity:+!t.expanded,pointerEvents:t.expanded?"none":"auto",transition:e.transitions.create(["opacity"])})),E=(0,o.Ay)(I.A)(({theme:e,ownerState:t})=>({gridArea:"1 / 1",overflowX:"clip",width:t.expanded?260:"var(--trigger-width)",opacity:+!!t.expanded,transition:e.transitions.create(["width","opacity"])}));function N({title:e,onClickCreate:t}){let[r,o]=i.useState(!1),n=i.useRef(null);return(0,s.jsxs)(a.M,{children:[(0,s.jsx)(T.default,{color:"primary",variant:"body1",sx:{flex:1,mx:.5,fontWeight:"600"},children:e}),(0,s.jsx)(f.A,{title:"Columns",children:(0,s.jsx)(d.U,{render:(0,s.jsx)(l.I,{}),children:(0,s.jsx)(j.A,{fontSize:"small"})})}),(0,s.jsx)(f.A,{title:"Filters",children:(0,s.jsx)(c.P,{render:(e,t)=>(0,s.jsx)(l.I,{...e,color:"default",children:(0,s.jsx)(A.A,{badgeContent:t.filterCount,color:"primary",variant:"dot",children:(0,s.jsx)(g.A,{fontSize:"small"})})})})}),(0,s.jsx)(C.A,{orientation:"vertical",variant:"middle",flexItem:!0,sx:{mx:.5}}),(0,s.jsx)(f.A,{title:"Export",children:(0,s.jsx)(l.I,{ref:n,id:"export-menu-trigger","aria-controls":"export-menu","aria-haspopup":"true","aria-expanded":r?"true":void 0,onClick:()=>o(!0),children:(0,s.jsx)(y.A,{fontSize:"small"})})}),(0,s.jsxs)(v.A,{id:"export-menu",anchorEl:n.current,open:r,onClose:()=>o(!1),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},slotProps:{list:{"aria-labelledby":"export-menu-trigger"}},children:[(0,s.jsx)(u.A,{render:(0,s.jsx)(b.A,{}),onClick:()=>o(!1),children:"Print"}),(0,s.jsx)(p.X,{render:(0,s.jsx)(b.A,{}),onClick:()=>o(!1),children:"Download as CSV"})]}),(0,s.jsxs)(P,{children:[(0,s.jsx)(h.m,{render:(e,t)=>(0,s.jsx)(f.A,{title:"Search",enterDelay:0,children:(0,s.jsx)(D,{...e,ownerState:{expanded:t.expanded},color:"default","aria-disabled":t.expanded,children:(0,s.jsx)(w.A,{fontSize:"small"})})})}),(0,s.jsx)(x.X,{render:({ref:e,...t},r)=>(0,s.jsx)(E,{...t,ownerState:{expanded:r.expanded},inputRef:e,"aria-label":"Search",placeholder:"Search...",size:"small",slotProps:{input:{startAdornment:(0,s.jsx)(k.A,{position:"start",children:(0,s.jsx)(w.A,{fontSize:"small"})}),endAdornment:r.value?(0,s.jsx)(k.A,{position:"end",children:(0,s.jsx)(m.x,{edge:"end",size:"small","aria-label":"Clear search",material:{sx:{marginRight:-.75}},children:(0,s.jsx)(S.A,{fontSize:"small"})})}):null,...t.slotProps?.input},...t.slotProps}})})]}),!!t&&(0,s.jsx)(M.A,{color:"primary",onClick:t,children:(0,s.jsx)(R.A,{})})]})}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4610:(e,t,r)=>{Promise.resolve().then(r.bind(r,63902))},10606:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),i=r(48088),o=r(88170),n=r.n(o),l=r(30893),a={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>l[e]);r.d(t,a);let d={children:["",{children:["dashboard",{children:["keys",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,12438)),"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist\\src\\app\\dashboard\\keys\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,63144)),"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist\\src\\app\\dashboard\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist\\src\\app\\dashboard\\keys\\page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/dashboard/keys/page",pathname:"/dashboard/keys",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},12438:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\carlos.dias\\\\Documents\\\\repositorio\\\\checklist\\\\src\\\\app\\\\dashboard\\\\keys\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist\\src\\app\\dashboard\\keys\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35378:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var s=r(80828),i=r(12915),o=r(43210),n=r(12328),l=r(33930),a=r(60687);let d=["label","icon","showInMenu","onClick"],c=["label","icon","showInMenu","onClick","closeMenuOnClick","closeMenu"],u=(0,n.R)((e,t)=>{let r=(0,l.A)();if(!e.showInMenu){let{label:n,icon:l,onClick:c}=e,u=(0,i.A)(e,d);return(0,a.jsx)(r.slots.baseIconButton,(0,s.A)({size:"small",role:"menuitem","aria-label":n},u,{onClick:e=>{c?.(e)}},r.slotProps?.baseIconButton,{ref:t,children:o.cloneElement(l,{fontSize:"small"})}))}let{label:n,icon:u,onClick:p,closeMenuOnClick:h=!0,closeMenu:x}=e,m=(0,i.A)(e,c);return(0,a.jsx)(r.slots.baseMenuItem,(0,s.A)({ref:t},m,{onClick:e=>{p?.(e),h&&x?.()},iconStart:u,children:n}))})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},60283:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(24244),i=r(60687);let o=(0,s.A)((0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63144:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\carlos.dias\\\\Documents\\\\repositorio\\\\checklist\\\\src\\\\app\\\\dashboard\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist\\src\\app\\dashboard\\layout.tsx","default")},63902:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(60687);r(43210);var i=r(74328),o=r(10581),n=r(16758),l=r(684),a=r(85103),d=r(79384),c=r(44803),u=r(79509),p=r(30474),h=r(86557),x=r(29823),m=r(53872);let f=[{kind:"header",title:"Main items"},{segment:"dashboard",title:"Dashboard",icon:(0,s.jsx)(i.A,{})},{segment:"dashboard/keys",title:"Chaves",icon:(0,s.jsx)(h.A,{}),pattern:"dashboard/keys{/:keyId}*"},{kind:"divider"},{kind:"header",title:"An\xe1lises"},{segment:"dashboard/viagens",title:"Viagens",icon:(0,s.jsx)(o.A,{})},{segment:"dashboard/inspecao",title:"Inspe\xe7\xf5es",icon:(0,s.jsx)(n.A,{})},{segment:"dashboard/users",title:"Us\xfaarios",icon:(0,s.jsx)(l.A,{})},{segment:"dashboard/vehicles",title:"Veiculos",icon:(0,s.jsx)(m.A,{})},{kind:"divider"},{kind:"header",title:"Aplicativo"},{segment:"../",title:"Checklist",icon:(0,s.jsx)(x.A,{})}],v={title:"TRANSPORTES",logo:(0,s.jsx)(p.default,{priority:!0,style:{marginLeft:"28px",width:"auto",height:"100%"},src:"/logo.png",alt:"logo",width:100,height:100})},A={signIn:u.signIn,signOut:u.signOut};function j(e){let{data:t}=(0,u.wV)();return(0,s.jsx)(c.default,{children:(0,s.jsx)(a.Dv,{branding:v,navigation:f,session:t,authentication:A,children:(0,s.jsx)(d.N,{children:e.children})})})}},64442:(e,t,r)=>{Promise.resolve().then(r.bind(r,63144))},68639:(e,t,r)=>{Promise.resolve().then(r.bind(r,12438))},70342:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(10726),i=r(86112),o=r(86053);function n({props:e,name:t}){return(0,s.A)({props:e,name:t,defaultTheme:i.A,themeId:o.A})}},73778:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eR});var s=r(60687),i=r(43210),o=r(35378),n=r(70284),l=r(78590),a=r(22229),d=r(3366),c=r(24244);let u=(0,c.A)((0,s.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History");var p=r(32624);let h=(0,c.A)((0,s.jsx)("path",{d:"M19 5v14H5V5zm0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"}),"CheckBoxOutlineBlank");var x=r(97982),m=r(30150),f=r(51110),v=r(20981),A=r(49384),j=r(43771),g=r(27137),y=r(109),b=r(2704),C=r(99177),I=r(91437);function k(e){return(0,I.Ay)("MuiDialogContentText",e)}(0,C.A)("MuiDialogContentText",["root"]);let S=e=>{let{classes:t}=e,r=(0,j.A)({root:["root"]},k,t);return{...t,...r}},w=(0,y.Ay)(l.default,{shouldForwardProp:e=>(0,g.A)(e)||"classes"===e,name:"MuiDialogContentText",slot:"Root",overridesResolver:(e,t)=>t.root})({}),T=i.forwardRef(function(e,t){let r=(0,b.b)({props:e,name:"MuiDialogContentText"}),{children:i,className:o,...n}=r,l=S(n);return(0,s.jsx)(w,{component:"p",variant:"body1",color:"textSecondary",ref:t,ownerState:n,className:(0,A.A)(l.root,o),...r,classes:l})});var M=r(47121),R=r(87643),P=r(71953),D=r(36970),E=r(34677),N=r(17361),O=r(48833),z=r(90160);let q=({open:e,onClose:t,onConfirm:r,vehicleName:i,userName:o,isProcessing:n=!1})=>(0,s.jsxs)(m.A,{open:e,onClose:()=>!n&&t(),children:[(0,s.jsx)(f.A,{children:"Confirmar Transfer\xeancia"}),(0,s.jsx)(v.A,{children:(0,s.jsxs)(T,{children:["Deseja transferir a chave do ve\xedculo ",(0,s.jsx)("strong",{children:i})," para ",(0,s.jsx)("strong",{children:o}),"?"]})}),(0,s.jsxs)(M.A,{children:[(0,s.jsx)(R.A,{onClick:t,disabled:n,children:"Cancelar"}),(0,s.jsx)(R.A,{onClick:r,variant:"contained",disabled:n,children:n?(0,s.jsx)(P.A,{size:24}):"Confirmar"})]})]}),V=({open:e,onClose:t,onTransfer:r,users:o,vehicles:n,groupedVehicleKeys:l,currentUserId:a,isProcessing:d=!1})=>{let[c,u]=(0,i.useState)({userId:"",vehicleId:""}),[p,h]=(0,i.useState)(null),[x,A]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{e||(u({userId:"",vehicleId:""}),h(null),A(!1))},[e]),!n||!o)return(0,s.jsxs)(m.A,{open:e,onClose:t,children:[(0,s.jsx)(f.A,{children:"Carregando..."}),(0,s.jsx)(v.A,{children:(0,s.jsx)(P.A,{})})]});let j=e=>{let t=l[e];if(!t||!t.vehicleKeys||0===t.vehicleKeys.length)return"Nenhum";let r=t.vehicleKeys[0];return r?.user?.name||"Desconhecido"},g=e=>{let t=l[e];if(!t||!t.vehicleKeys||0===t.vehicleKeys.length)return null;let r=t.vehicleKeys[0];return r?.userId||null},y=()=>c.vehicleId?c.userId?g(c.vehicleId)===c.userId?"A chave j\xe1 est\xe1 com este usu\xe1rio":null:"Selecione um usu\xe1rio":"Selecione um ve\xedculo",b=async()=>{A(!1);try{let e={...c},s=l[c.vehicleId];s&&s.vehicleKeys&&s.vehicleKeys.length>0&&(e.parentId=s.vehicleKeys[0].id),await r(e),t()}catch(e){console.error("Error transferring vehicle key:",e),h("Erro ao transferir a chave. Tente novamente.")}},C=()=>{d||t()},I=n.find(e=>e.id===c.vehicleId),k=o.find(e=>e.id===c.userId),S=g(c.vehicleId);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m.A,{open:e,onClose:C,fullWidth:!0,maxWidth:"sm",children:[(0,s.jsx)(f.A,{children:"Nova Transfer\xeancia de Chave"}),(0,s.jsxs)(v.A,{children:[p&&(0,s.jsx)(D.A,{severity:"error",sx:{mb:2},children:p}),(0,s.jsxs)(E.A,{fullWidth:!0,sx:{mb:2,mt:2},children:[(0,s.jsx)(N.A,{children:"Ve\xedculo"}),(0,s.jsx)(O.A,{value:c.vehicleId,label:"Ve\xedculo",onChange:e=>{h(null),u({...c,vehicleId:e.target.value,userId:""})},disabled:d,children:n.map(e=>(0,s.jsxs)(z.A,{value:e.id,children:[`${e.plate} - ${e.model}`,c.vehicleId===e.id&&` (Atual: ${j(e.id)})`]},e.id))})]}),(0,s.jsxs)(E.A,{fullWidth:!0,sx:{mb:2},children:[(0,s.jsx)(N.A,{children:"Novo Respons\xe1vel"}),(0,s.jsx)(O.A,{value:c.userId,label:"Novo Respons\xe1vel",onChange:e=>{h(null),u({...c,userId:e.target.value})},disabled:d||!c.vehicleId,children:o.map(e=>{let t=S===e.id;return(0,s.jsxs)(z.A,{value:e.id,disabled:t,children:[e.name,t&&" (Respons\xe1vel Atual)"]},e.id)})})]}),c.vehicleId&&(0,s.jsxs)(D.A,{severity:"info",sx:{mt:2},children:["Respons\xe1vel atual: ",(0,s.jsx)("strong",{children:j(c.vehicleId)})]})]}),(0,s.jsxs)(M.A,{children:[(0,s.jsx)(R.A,{onClick:C,disabled:d,children:"Cancelar"}),(0,s.jsx)(R.A,{onClick:()=>{let e=y();if(e)return void h(e);h(null),A(!0)},variant:"contained",disabled:!c.userId||!c.vehicleId||d,children:d?(0,s.jsx)(P.A,{size:24}):"Transferir"})]})]}),(0,s.jsx)(q,{open:x,onClose:()=>!d&&A(!1),onConfirm:b,vehicleName:I?`${I.plate} - ${I.model}`:"",userName:k?.name,isProcessing:d})]})};var $=r(77567),_=r(28274),G=r(79534);let U=(0,c.A)((0,s.jsx)("path",{d:"M16.39 9H7.61c-.43 0-.81.28-.95.68l-1.66 5v6.81c0 .29.23.51.5.51h1c.28 0 .5-.22.5-.5V20h10v1.5c0 .28.22.5.5.5h1c.28 0 .5-.22.5-.5v-6.81l-1.66-5c-.14-.41-.52-.69-.95-.69m-8.61 9c-.68 0-1.22-.54-1.22-1.22s.54-1.22 1.22-1.22S9 16.11 9 16.78 8.46 18 7.78 18m8.44 0c-.67 0-1.22-.54-1.22-1.22s.54-1.22 1.22-1.22 1.22.54 1.22 1.22S16.9 18 16.22 18m-9.93-4 1.33-4h8.78l1.33 4zm4.54-11C10.41 1.83 9.3 1 8 1 6.34 1 5 2.34 5 4c0 1.65 1.34 3 3 3 1.3 0 2.41-.84 2.83-2H16v2h2V5h1V3zM8 5c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"CarRental");var H=r(60283);let K=(0,c.A)([(0,s.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),(0,s.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var W=r(99282),B=r(70342);let F=i.createContext({});var L=r(69409),X=r(4144);function Z(e){return(0,L.Ay)("MuiTimeline",e)}(0,X.A)("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);var Q=r(21318);function J(e){return"alternate-reverse"===e?"positionAlternateReverse":`position${(0,Q.A)(e)}`}let Y=e=>{let{position:t,classes:r}=e,s={root:["root",t&&J(t)]};return(0,W.A)(s,Z,r)},ee=(0,y.Ay)("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.position&&t[J(r.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),et=i.forwardRef(function(e,t){let r=(0,B.A)({props:e,name:"MuiTimeline"}),{position:o="right",className:n,...l}=r,a={...r,position:o},d=Y(a),c=i.useMemo(()=>({position:o}),[o]);return(0,s.jsx)(F.Provider,{value:c,children:(0,s.jsx)(ee,{className:(0,A.A)(d.root,n),ownerState:a,ref:t,...l})})});var er=r(78425);function es(e){return(0,L.Ay)("MuiTimelineContent",e)}let ei=(0,X.A)("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),eo=(0,X.A)("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function en(e){return(0,L.Ay)("MuiTimelineItem",e)}(0,X.A)("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);let el=e=>{let{position:t,classes:r,hasOppositeContent:s}=e,i={root:["root",J(t),!s&&"missingOppositeContent"]};return(0,W.A)(i,en,r)},ea=(0,y.Ay)("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[J(r.position)]]}})(({ownerState:e})=>({listStyle:"none",display:"flex",position:"relative",minHeight:70,..."left"===e.position&&{flexDirection:"row-reverse"},...("alternate"===e.position||"alternate-reverse"===e.position)&&{[`&:nth-of-type(${"alternate"===e.position?"even":"odd"})`]:{flexDirection:"row-reverse",[`& .${ei.root}`]:{textAlign:"right"},[`& .${eo.root}`]:{textAlign:"left"}}},...!e.hasOppositeContent&&{"&::before":{content:'""',flex:1,padding:"6px 16px"}}})),ed=i.forwardRef(function(e,t){let r=(0,B.A)({props:e,name:"MuiTimelineItem"}),{position:o,className:n,...l}=r,{position:a}=i.useContext(F),d=!1;i.Children.forEach(r.children,e=>{(0,er.A)(e,["TimelineOppositeContent"])&&(d=!0)});let c={...r,position:o||a||"right",hasOppositeContent:d},u=el(c),p=i.useMemo(()=>({position:c.position}),[c.position]);return(0,s.jsx)(F.Provider,{value:p,children:(0,s.jsx)(ea,{className:(0,A.A)(u.root,n),ownerState:c,ref:t,...l})})});function ec(e){return(0,L.Ay)("MuiTimelineSeparator",e)}(0,X.A)("MuiTimelineSeparator",["root"]);let eu=e=>{let{classes:t}=e;return(0,W.A)({root:["root"]},ec,t)},ep=(0,y.Ay)("div",{name:"MuiTimelineSeparator",slot:"Root"})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),eh=i.forwardRef(function(e,t){let r=(0,B.A)({props:e,name:"MuiTimelineSeparator"}),{className:i,...o}=r,n=eu(r);return(0,s.jsx)(ep,{className:(0,A.A)(n.root,i),ownerState:r,ref:t,...o})});function ex(e){return(0,L.Ay)("MuiTimelineConnector",e)}(0,X.A)("MuiTimelineConnector",["root"]);let em=e=>{let{classes:t}=e;return(0,W.A)({root:["root"]},ex,t)},ef=(0,y.Ay)("span",{name:"MuiTimelineConnector",slot:"Root"})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.grey[400],flexGrow:1})),ev=i.forwardRef(function(e,t){let r=(0,B.A)({props:e,name:"MuiTimelineConnector"}),{className:i,...o}=r,n=em(r);return(0,s.jsx)(ef,{className:(0,A.A)(n.root,i),ownerState:r,ref:t,...o})}),eA=e=>{let{position:t,classes:r}=e,s={root:["root",J(t)]};return(0,W.A)(s,es,r)},ej=(0,y.Ay)(l.default,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[J(r.position)]]}})(({ownerState:e})=>({flex:1,padding:"6px 16px",textAlign:"left",..."left"===e.position&&{textAlign:"right"}})),eg=i.forwardRef(function(e,t){let r=(0,B.A)({props:e,name:"MuiTimelineContent"}),{className:o,...n}=r,{position:l}=i.useContext(F),a={...r,position:l||"right"},d=eA(a);return(0,s.jsx)(ej,{component:"div",className:(0,A.A)(d.root,o),ownerState:a,ref:t,...n})});function ey(e){return(0,L.Ay)("MuiTimelineDot",e)}(0,X.A)("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);let eb=e=>{let{color:t,variant:r,classes:s}=e,i={root:["root",r,"inherit"!==t&&`${r}${(0,Q.A)(t)}`]};return(0,W.A)(i,ey,s)},eC=(0,y.Ay)("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t["inherit"!==r.color&&`${r.variant}${(0,Q.A)(r.color)}`],t[r.variant]]}})(({ownerState:e,theme:t})=>({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(t.vars||t).shadows[1],margin:"11.5px 0",..."filled"===e.variant&&{borderColor:"transparent",..."inherit"!==e.color&&{..."grey"===e.color?{color:(t.vars||t).palette.grey[50],backgroundColor:(t.vars||t).palette.grey[400]}:{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main}}},..."outlined"===e.variant&&{boxShadow:"none",backgroundColor:"transparent",..."inherit"!==e.color&&{..."grey"===e.color?{borderColor:(t.vars||t).palette.grey[400]}:{borderColor:(t.vars||t).palette[e.color].main}}}})),eI=i.forwardRef(function(e,t){let r=(0,B.A)({props:e,name:"MuiTimelineDot"}),{className:i,color:o="grey",variant:n="filled",...l}=r,a={...r,color:o,variant:n},d=eb(a);return(0,s.jsx)(eC,{className:(0,A.A)(d.root,i),ownerState:a,ref:t,...l})}),ek=({open:e,onClose:t,data:r})=>{if(!r)return null;console.log({data:r});let i=[...r.vehicleKeys].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());return(0,s.jsxs)(m.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,s.jsx)(f.A,{children:(0,s.jsxs)(_.default,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsxs)(l.default,{variant:"h6",children:["Hist\xf3rico do Ve\xedculo:",(0,s.jsx)(l.default,{color:"primary",sx:{fontWeight:600},children:r.title})]}),(0,s.jsx)(p.A,{onClick:t,sx:{cursor:"pointer"}})]})}),(0,s.jsx)(v.A,{children:(0,s.jsx)(et,{sx:{position:"relative",left:-30},children:i.map((e,t)=>(0,s.jsxs)(ed,{children:[(0,s.jsxs)(eh,{children:[(0,s.jsx)(eI,{color:0===t?"primary":"grey",children:0===t?(0,s.jsx)(U,{}):(0,s.jsx)(H.A,{})}),t<i.length-1&&(0,s.jsx)(ev,{})]}),(0,s.jsx)(eg,{children:(0,s.jsxs)(G.A,{elevation:0===t?3:1,sx:{p:2,borderLeft:`4px solid ${0===t?"primary.main":"grey.500"}`},children:[(0,s.jsxs)(_.default,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,s.jsx)(l.default,{variant:"subtitle1",color:0===t?"primary.main":"text.secondary",children:0===t?"Transfer\xeancia Atual":`Transfer\xeancia ${t+1}`}),(0,s.jsxs)(_.default,{display:"flex",alignItems:"center",gap:1,children:[(0,s.jsx)(K,{fontSize:"small"}),(0,s.jsx)(l.default,{variant:"body2",children:new Date(e.createdAt).toLocaleString()})]})]}),(0,s.jsxs)(l.default,{variant:"body1",sx:{mt:1},children:["Respons\xe1vel: ",(0,s.jsx)("b",{children:e.user.name})]}),(0,s.jsx)(l.default,{variant:"body1",sx:{mt:1},children:"CONFIRMED"===e.status?"CONFIRMOU A CHAVE":"CONFIRMA\xc7\xc3O PENDENTE"}),(0,s.jsxs)(_.default,{sx:{mt:1,display:"grid",gridTemplateColumns:"1fr 1fr",gap:1},children:[(0,s.jsxs)(l.default,{variant:"body2",children:[(0,s.jsx)("strong",{children:"Placa:"})," ",e.vehicle.plate,"..."]}),e.status&&(0,s.jsxs)(l.default,{variant:"body2",children:[(0,s.jsx)("strong",{children:"Status:"})," ",e.status]})]})]})})]},e.id))})})]})};var eS=r(1896),ew=r(58706),eT=r(79509),eM=r(51060);function eR(){let{data:e}=(0,eT.wV)(),[t,r]=i.useState(!1),[c,m]=i.useState(),{data:f,isLoading:v,mutate:A}=(0,a.Ay)("/api/v2/dashboard/keys",d.GO),[j,g]=i.useState(!1),[y]=i.useState(!1),[b,C]=i.useState(),[I,k]=i.useState(!1);if(i.useEffect(()=>(k(!0),()=>k(!1)),[]),!I)return;let S=async t=>{try{if(t.userId===e?.user.id){let{data:r}=await eM.A.post("/api/v2/dashboard/keys",{...t,newUser:e?.user.id})}else{let{data:e}=await eM.A.post("/api/v2/dashboard/keys",t)}C({text:"Chave transferida com sucesso!",status:"success",isOpen:!0})}catch(e){C({text:"Erro ao fazer transferida!",status:"error",isOpen:!0})}finally{A(),setTimeout(()=>{C({text:"",status:"",isOpen:!1})},3e3)}},w=async({id:t})=>{$.A.fire({title:"Deseja confirmar o recebimento desta chave?",showDenyButton:!0,denyButtonText:`N\xe3o`,confirmButtonText:"Sim",confirmButtonColor:"green"}).then(async r=>{if(r.isConfirmed)try{let r=e?.user.id||"";if(!r)throw Error("Erro ao Receber chave");let{data:s}=await eM.A.put("/api/v2/dashboard/keys",{id:t,userId:r});C({text:"Transfer\xeancia recebida com sucesso!",status:"success",isOpen:!0})}catch(e){C({text:"Erro ao confirmar transfer\xeancia",status:"error",isOpen:!0})}finally{A(),setTimeout(()=>{C({text:"",status:"",isOpen:!1})},3e3)}})},T=async e=>{if(e&&confirm("Deseja cancelar a transfer\xeancia de chave?"))try{let{data:t}=await eM.A.delete(`/api/v2/dashboard/keys/${e}`);C({text:"Transfer\xeancia deletada",status:"success",isOpen:!0})}catch(e){C({text:"Erro ao rejeitar transfer\xeancia.",status:"error",isOpen:!0})}finally{A(),setTimeout(()=>{C({text:"",status:"",isOpen:!1})},3e3)}},M=[{field:"id",headerName:"ID",flex:1},{field:"user",headerName:"Usu\xe1rio",flex:1},{field:"vehicle",headerName:"Veiculo",flex:1},{field:"status",headerName:"Status",type:"singleSelect",flex:1,renderCell({value:e}){let t={CONFIRMED:"RECEBIDO",PENDING:"ENTREGA PENDENTE"}[e]||e,r={CONFIRMED:"success",PENDING:"error"}[e]||e;return(0,s.jsx)(l.default,{pt:2,color:r,children:t})}},{field:"actions",type:"actions",headerName:"A\xe7\xf5es",flex:1,maxWidth:100,getActions:({row:t})=>[..."PENDING"===t.status&&t.user!=e?.user.name?[(0,s.jsx)(o.Z,{icon:(0,s.jsx)(h,{color:"primary"}),label:"Confirmar",onClick:()=>{w(t)}},"confirm")]:[],(0,s.jsx)(o.Z,{onClick:()=>{f.grouped[t.vehicleId]&&(m({...f.grouped[t.vehicleId],title:t.vehicle}),r(!0))},label:"Hist\xf3rico",icon:(0,s.jsx)(u,{fontSize:"small"}),disabled:y},"historic"),..."PENDING"===t.status&&t.user!=e?.user.name?[(0,s.jsx)(o.Z,{icon:(0,s.jsx)(p.A,{color:"error"}),label:"Rejeitar",onClick:()=>{T(t.id)}},"reject")]:[]]}],R=f?f.last:[];return(0,s.jsxs)(x.L,{style:{height:400,width:"100%"},children:[!!b?.status&&(0,s.jsx)(D.A,{color:b.status,action:(0,s.jsx)(ew.A,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>{C({status:""})},children:(0,s.jsx)(p.A,{fontSize:"inherit"})}),children:b.text}),(0,s.jsx)(n.z,{columns:M,rows:R,loading:v,slots:{toolbar:()=>(0,s.jsx)(eS.A,{title:"Chaves",onClickCreate:()=>g(!0)})},showToolbar:!0,autoPageSize:!0,localeText:{toolbarQuickFilterPlaceholder:"Pesquisar..."},slotProps:{loadingOverlay:{variant:"skeleton",noRowsVariant:"skeleton"}},initialState:{pagination:{paginationModel:{pageSize:25,page:0}},columns:{columnVisibilityModel:{id:!1}}},pageSizeOptions:[10,100,{value:1e3,label:"1,000"},{value:-1,label:"All"}]}),(0,s.jsx)(V,{open:j,onClose:()=>g(!1),onTransfer:S,users:f?.users||[],vehicles:f?.vehicles||[],groupedVehicleKeys:f?.grouped||[],currentUserId:"1",isProcessing:y}),t&&(0,s.jsx)(ek,{open:t,onClose:()=>r(!1),data:c})]})}},74075:e=>{"use strict";e.exports=require("zlib")},79415:(e,t,r)=>{Promise.resolve().then(r.bind(r,73778))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94735:e=>{"use strict";e.exports=require("events")},96330:e=>{"use strict";e.exports=require("@prisma/client")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[80,5665,2208,4917,4361,7139,5384,1462,2229,2860,998,8334,8489,4108,1020,3713,2139,7567,7312],()=>r(10606));module.exports=s})();