(()=>{var e={};e.id=8647,e.ids=[8647],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11735:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,z:()=>s});var a=r(96330);let s=global.prisma||new a.PrismaClient,i=s},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},91947:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>h,routeModule:()=>l,serverHooks:()=>x,workAsyncStorage:()=>w,workUnitAsyncStorage:()=>v});var a={};r.r(a),r.d(a,{GET:()=>p});var s=r(96559),i=r(48088),n=r(37719),o=r(11735),u=r(32190);let d=async(e,t,r,a)=>({title:e,value:`${a}`,interval:r,trend:{label:t,value:""},data:[]});async function c(){let e=await o.z.user.findMany({select:{id:!0,name:!0}}),t=await o.z.inspection.groupBy({by:["userId"],where:{status:"INICIO"},_count:{id:!0}}),r=await o.z.inspection.groupBy({by:["userId"],where:{status:"FINAL"},_count:{id:!0}});return t.map(t=>{let a=t.userId,s=r.find(e=>e.userId===a),i=s?s._count.id:0,n=e.find(e=>e.id===a);return{iniciada:t._count.id,finalizada:i,motorista:n?.name}})}async function p(e){try{let e=await o.z.inspection.count({where:{status:"INSPECAO"}}),t=await o.z.inspection.count({where:{NOT:{status:"INSPECAO"}}}),r=await o.z.user.count(),a=await o.z.vehicle.count(),s=await d("Inspe\xe7\xf5es","up","Total",e),i=await d("Viagens","up","Total",t),n=await d("Usu\xe1rios","down","Total",r),p=await d("Veiculos","neutral","Total",a),l=await c();return u.NextResponse.json({cards:[n,i,s,p],byUsers:l})}catch(e){return u.NextResponse.json({error:e},{status:403})}finally{await o.z.$disconnect()}}let l=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/v2/dashboard/route",pathname:"/api/v2/dashboard",filename:"route",bundlePath:"app/api/v2/dashboard/route"},resolvedPagePath:"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist_mui\\src\\app\\api\\v2\\dashboard\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:w,workUnitAsyncStorage:v,serverHooks:x}=l;function h(){return(0,n.patchFetch)({workAsyncStorage:w,workUnitAsyncStorage:v})}},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{},96559:(e,t,r)=>{"use strict";e.exports=r(44870)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[80],()=>r(91947));module.exports=a})();