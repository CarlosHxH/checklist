(()=>{var e={};e.id=1014,e.ids=[1014],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11735:(e,r,t)=>{"use strict";t.d(r,{A:()=>n,z:()=>a});var s=t(96330);let a=global.prisma||new s.PrismaClient,n=a},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25418:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>l,serverHooks:()=>p,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>d});var s={};t.r(s),t.d(s,{GET:()=>i,POST:()=>u});var a=t(96559),n=t(48088),o=t(37719);let{GET:i,POST:u}=t(93573).Y9,l=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist\\src\\app\\api\\auth\\[...nextauth]\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:c,workUnitAsyncStorage:d,serverHooks:p}=l;function m(){return(0,o.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:d})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},93573:(e,r,t)=>{"use strict";t.d(r,{Y9:()=>d,j2:()=>p});var s=t(72153),a=t(10189),n=t(85665),o=t(11735);async function i(e){try{return await o.A.user.findUnique({where:{username:e},select:{id:!0,username:!0,email:!0,name:!0,password:!0,role:!0,isActive:!0,image:!0}})}catch(e){return console.error("Erro ao buscar usu\xe1rio:",e),null}}async function u(e,r){let t=await i(e);return t?t.password?t.isActive?await (0,n.compare)(r,t.password)?{id:t.id,username:t.username,email:t.email||"",name:t.name,role:t.role,image:t.image}:(console.log(`Credenciais inv\xe1lidas para usu\xe1rio: ${e}`),null):(console.log(`Conta desativada para usu\xe1rio: ${e}`),null):(console.log(`Usu\xe1rio ${e} sem senha configurada`),null):(console.log(`Tentativa de login com usu\xe1rio inexistente: ${e}`),null)}let l="",c=[(0,a.A)({credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){try{if(!e?.username||!e?.password)return console.log("Credenciais n\xe3o fornecidas"),null;let{username:r,password:t}=e,s=await u(r,t);if(!s)return console.log("Falha na autentica\xe7\xe3o"),null;return console.log(`Login bem-sucedido para usu\xe1rio: ${s.username}`),l=s.role,{id:s.id,name:s.name,email:s.email,image:s.image,username:s.username,role:s.role}}catch(e){return console.error("Erro inesperado na autoriza\xe7\xe3o:",e),null}}})];c.map(e=>{if("function"==typeof e){let r=e();return{id:r.id,name:r.name}}return{id:e.id,name:e.name}});let{handlers:d,auth:p,signIn:m,signOut:g}=(0,s.Ay)({trustHost:!0,providers:c,secret:"KnTdIVqfwV2XlZJ0vLI5CHlW5iCfobiuk7hcHEyIhYE=",pages:{signIn:"/auth/signin"},callbacks:{authorized({auth:e,request:{nextUrl:r}}){let t=!!e?.user;return!!r.pathname.startsWith("/auth")||"/"===r.pathname||!!t},jwt:async({token:e,user:r})=>(r&&(e.id=r.id,e.username=r.username,e.role=r.role??""),e),session:async({session:e,token:r})=>(r&&(e.user.id=r.id,e.user.username=r.username,e.user.role=r.role),e),async redirect({url:e,baseUrl:r}){let t="/";return l&&"ADMIN"===l&&(t="/dashboard"),e.startsWith(r)?e:r+t}},events:{async signIn({user:e}){try{console.log(`Usu\xe1rio logado com sucesso: ${e.username}`)}catch(e){console.error("Erro ao criar account no signIn:",e)}},async signOut({token:e}){try{await o.A.account.deleteMany({where:{userId:e.id,provider:"credentials"}}),console.log(`Usu\xe1rio deslogado: ${e.username}`)}catch(e){console.error("Erro ao remover tokens no signOut:",e)}}},session:{strategy:"jwt",maxAge:86400,updateAge:86400},logger:{error(e,...r){console.error(`NextAuth Error [${e}]:`,...r)},warn(e,...r){console.warn(`NextAuth Warning [${e}]:`,...r)},debug(e,...r){console.debug(`NextAuth Debug [${e}]:`,...r)}}})},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{},96559:(e,r,t)=>{"use strict";e.exports=t(44870)}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[80,5665,2208,4917],()=>t(25418));module.exports=s})();