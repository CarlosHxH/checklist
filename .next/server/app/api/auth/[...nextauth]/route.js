(()=>{var e={};e.id=1014,e.ids=[1014],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11735:(e,r,s)=>{"use strict";s.d(r,{A:()=>n,z:()=>t});var a=s(96330);let t=global.prisma||new a.PrismaClient,n=t},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31347:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>m,routeModule:()=>l,serverHooks:()=>p,workAsyncStorage:()=>c,workUnitAsyncStorage:()=>d});var a={};s.r(a),s.d(a,{GET:()=>i,POST:()=>u});var t=s(96559),n=s(48088),o=s(37719);let{GET:i,POST:u}=s(93573).Y9,l=new t.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/[...nextauth]/route",pathname:"/api/auth/[...nextauth]",filename:"route",bundlePath:"app/api/auth/[...nextauth]/route"},resolvedPagePath:"C:\\Users\\carlos.dias\\Documents\\repositorio\\checklist_mui\\src\\app\\api\\auth\\[...nextauth]\\route.ts",nextConfigOutput:"",userland:a}),{workAsyncStorage:c,workUnitAsyncStorage:d,serverHooks:p}=l;function m(){return(0,o.patchFetch)({workAsyncStorage:c,workUnitAsyncStorage:d})}},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},78335:()=>{},93573:(e,r,s)=>{"use strict";s.d(r,{Y9:()=>d,j2:()=>p});var a=s(72153),t=s(10189),n=s(85665),o=s(11735);async function i(e){try{return await o.A.user.findUnique({where:{username:e},select:{id:!0,username:!0,email:!0,name:!0,password:!0,role:!0,isActive:!0,image:!0}})}catch(e){return console.error("Erro ao buscar usu\xe1rio:",e),null}}async function u(e,r){let s=await i(e);return s?s.password?s.isActive?await (0,n.compare)(r,s.password)?{id:s.id,username:s.username,email:s.email||"",name:s.name,role:s.role,image:s.image}:(console.log(`Credenciais inv\xe1lidas para usu\xe1rio: ${e}`),null):(console.log(`Conta desativada para usu\xe1rio: ${e}`),null):(console.log(`Usu\xe1rio ${e} sem senha configurada`),null):(console.log(`Tentativa de login com usu\xe1rio inexistente: ${e}`),null)}let l="",c=[(0,t.A)({credentials:{username:{label:"Username",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){try{if(!e?.username||!e?.password)return console.log("Credenciais n\xe3o fornecidas"),null;let{username:r,password:s}=e,a=await u(r,s);if(!a)return console.log("Falha na autentica\xe7\xe3o"),null;return console.log(`Login bem-sucedido para usu\xe1rio: ${a.username}`),l=a.role,{id:a.id,name:a.name,email:a.email,image:a.image,username:a.username,role:a.role}}catch(e){return console.error("Erro inesperado na autoriza\xe7\xe3o:",e),null}}})];process.env.AUTH_SECRET||console.warn('Missing environment variable "AUTH_SECRET"'),process.env.DATABASE_URL||console.warn('Missing environment variable "DATABASE_URL"'),c.map(e=>{if("function"==typeof e){let r=e();return{id:r.id,name:r.name}}return{id:e.id,name:e.name}});let{handlers:d,auth:p,signIn:m,signOut:g}=(0,a.Ay)({providers:c,secret:process.env.AUTH_SECRET,pages:{signIn:"/auth/signin"},callbacks:{authorized({auth:e,request:{nextUrl:r}}){let s=!!e?.user;return!!r.pathname.startsWith("/auth")||"/"===r.pathname||!!s},jwt:async({token:e,user:r})=>(r&&(e.id=r.id,e.username=r.username,e.role=r.role??""),e),session:async({session:e,token:r})=>(r&&(e.user.id=r.id,e.user.username=r.username,e.user.role=r.role),e),async redirect({url:e,baseUrl:r}){let s="/";return l&&"ADMIN"===l&&(s="/dashboard"),e.startsWith(r)?e:r+s}},events:{async signIn({user:e}){try{console.log(`Usu\xe1rio logado com sucesso: ${e.username}`)}catch(e){console.error("Erro ao criar account no signIn:",e)}},async signOut({token:e}){try{await o.A.account.deleteMany({where:{userId:e.id,provider:"credentials"}}),console.log(`Usu\xe1rio deslogado: ${e.username}`)}catch(e){console.error("Erro ao remover tokens no signOut:",e)}}},session:{strategy:"jwt",maxAge:86400,updateAge:86400},logger:{error(e,...r){},warn(e,...r){},debug(e,...r){}}})},96330:e=>{"use strict";e.exports=require("@prisma/client")},96487:()=>{},96559:(e,r,s)=>{"use strict";e.exports=s(44870)}};var r=require("../../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[80,5665,2208,4917],()=>s(31347));module.exports=a})();